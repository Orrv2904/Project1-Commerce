{% extends "auctions/layout.html" %}

{% block body %}

<div class="container mt-4">
    <div class="row mt-4">
        {% if user.is_authenticated %}
            {% if isListingInWatchlist %}
            <form action="{% url 'removeWatchlist' id=listing.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Remove from Watchlist</button>
            </form>
            {% else %}
            <form action="{% url 'addWatchlist' id=listing.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-success">Add to Watchlist</button>
            </form>
            {% endif %}
        {% endif %}
    </div>

    <br>
    <div class="row">
        <div class="col-md-4">
            <img src="{{ listing.imageUrl.url }}" alt="{{ listing.title }}" class="img-fluid custom-small-image">
            <style>
                .custom-small-image {
                  width: 600px;
                  height: 400px;
                  object-fit: cover;
                }
              </style>
        </div>
        <div class="col-md-8">
            <h2>{{ listing.title }}</h2>
            <p>{{ listing.description }}</p>
            <p>{{ listing.price }}&nbsp;$</p>
            <button class="btn btn-primary">Comprar Ahora</button>
        </div>
    </div>
</div>

</div>
</div>

<div class="mt-4">
</div>

<div class="row mx-5 text-center">
<h2>Comments</h2>
{% if user.is_authenticated %}
<form action="{% url 'addComment' id=listing.id %}" method="post" class="mt-3">
    {% csrf_token %}
    <div class="input-group">
      <input type="text" name="comment" class="form-control" placeholder="Add a new comment" aria-label="Add a new comment" required>
      <button type="submit" class="btn btn-primary">Submit</button>
    </div>
  </form>  
{% endif %}
</div>

<div class="mt-4">
</div>

{% endblock %}