{% extends "auctions/layout.html" %}

{% block body %}

<div class="container mt-4">
    <div class="row mt-4">
        {% if user.is_authenticated %}
            {% if isListingInWatchlist %}
            <form action="{% url 'removeWatchlist' id=listing.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">Remove from Watchlist</button>
            </form>
            {% else %}
            <form action="{% url 'addWatchlist' id=listing.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-success">Add to Watchlist</button>
            </form>
            {% endif %}
        {% endif %}
    </div>

    <br>
    <div class="row">
        <div class="col-md-4">
            <img src="{{ listing.imageUrl.url }}" alt="{{ listing.title }}" class="img-fluid custom-small-image">
            <style>
                .custom-small-image {
                  width: 600px;
                  height: 400px;
                  object-fit: cover;
                }
              </style>
        </div>
        <div class="col-md-8">
            <h2>{{ listing.title }}</h2>
            <p>{{ listing.description }}</p>
            <p>{{ listing.price }}&nbsp;$</p>
            <button class="btn btn-primary">Comprar Ahora</button>
        </div>
    </div>
</div>

</div>
</div>

<div class="mt-4">
</div>

<div class="row mx-5 text-center">
<h2>Comments</h2>
<br>
{% if user.is_authenticated %}
<form action="{% url 'addComment' id=listing.id %}" method="post" class="mt-3">
    {% csrf_token %}
    <div class="input-group">
      <input type="text" name="comment" class="form-control" placeholder="Add a new comment" aria-label="Add a new comment" required>
      <button type="submit" class="btn btn-primary">Submit</button>
    </div>
  </form>  
{% endif %}
</div>
<br>
<br>
<br>
<div class="mt-4">
</div>
<div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Comments</h5>
            <ul class="list-unstyled">
              {% for comment in allComments %}
              <li class="media mb-4">
                <img src="https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png" alt="User Avatar" class="mr-3 rounded-circle" width="50">
                <div class="media-body" style="margin-right: 80px;">
                  <h6 class="mt-0"><strong>{{ comment.author.username }}</strong></h6>
                  <p>{{ comment.message }}</p>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
</div>

<div class="mt-4">
</div>
<div class="mt-4">
</div> 
  
{% endblock %}